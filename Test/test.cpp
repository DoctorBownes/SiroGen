#include "test.h"
Entity* guy;
Entity* gal;
SpriteAnimation tippinghat;
Test::Test() : Scene()
{
	GetMainCamera()->SetZoom(10);
	char canvas[]
	{
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0xe,0xe,0xe,0xe,0xe,0xe,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0xe,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0x0,0xe,0xe,0x0,0x0,0x0,
		0x0,0xe,0xe,0xe,0x0,0xe,0xe,0x0,
		0xe,0xe,0xe,0xe,0xe,0xe,0xe,0xe,
		0xe,0x0,0xe,0xe,0x0,0xe,0x0,0xe,
		0xe,0x0,0xe,0xe,0x0,0xe,0x0,0xe,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0x0,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0xe,0x0,
	};
	char canvas2[]
	{
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0xe,0xe,0xe,0xe,0xe,0xe,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0xe,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0x0,0xe,0xe,0x0,0x0,0x0,
		0x0,0xe,0xe,0xe,0x0,0xe,0xe,0x0,
		0xe,0xe,0xe,0xe,0xe,0xe,0xe,0xe,
		0xe,0x0,0xe,0xe,0x0,0xe,0x0,0xe,
		0xe,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0x0,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0xe,0x0,
	};
	char canvas3[]
	{
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0xe,0xe,0xe,0xe,0xe,0xe,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0xe,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0x0,0xe,0xe,0x0,0x0,0x0,
		0x0,0xe,0xe,0xe,0x0,0xe,0xe,0xe,
		0xe,0xe,0xe,0xe,0xe,0xe,0x0,0x0,
		0xe,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0xe,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0x0,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0xe,0x0,
	};
	char canvas4[]
	{
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0xe,0xe,0xe,0xe,0xe,0xe,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0xe,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0xe,
		0x0,0x0,0x0,0xe,0xe,0x0,0x0,0xe,
		0x0,0xe,0xe,0xe,0x0,0xe,0xe,0xe,
		0xe,0xe,0xe,0xe,0xe,0xe,0x0,0x0,
		0xe,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0xe,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0x0,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0xe,0x0,
	};
	char canvas5[]
	{
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0xe,0xe,0xe,0xe,0xe,0xe,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0x0,0xe,
		0x0,0x0,0xe,0xe,0xe,0xe,0xe,0xe,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0xe,
		0x0,0x0,0x0,0xe,0xe,0x0,0x0,0xe,
		0x0,0xe,0xe,0xe,0x0,0xe,0xe,0xe,
		0xe,0xe,0xe,0xe,0xe,0xe,0x0,0x0,
		0xe,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0xe,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0xe,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0x0,0x0,0xe,0x0,0x0,
		0x0,0x0,0xe,0xe,0x0,0xe,0xe,0x0,
	};
	char galcanvas[]
	{
		0x0,0x0,0x6,0x6,0x6,0x0,0x0,0x0,
		0x0,0x6,0x0,0x6,0x6,0x6,0x0,0x0,
		0x6,0x0,0x6,0x6,0x6,0x6,0x0,0x0,
		0x6,0x6,0x6,0x6,0x0,0x6,0x0,0x0,
		0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x0,
		0x6,0x0,0x6,0x6,0x6,0x6,0x0,0x0,
		0x6,0x0,0x0,0x6,0x6,0x0,0x0,0x0,
		0x0,0x6,0x6,0x6,0x6,0x6,0x6,0x0,
		0x0,0x5,0x6,0x6,0x6,0x6,0x5,0x0,
		0x0,0x0,0x5,0x6,0x6,0x5,0x0,0x0,
		0x0,0x0,0x6,0x5,0x5,0x6,0x0,0x0,
		0x0,0x6,0x6,0x6,0x6,0x6,0x6,0x0,
		0x0,0x6,0x6,0x6,0x6,0x6,0x6,0x0,
		0x6,0x6,0x6,0x6,0x6,0x6,0x6,0x6,
		0x0,0x0,0x6,0x0,0x0,0x6,0x0,0x0,
		0x0,0x0,0x6,0x6,0x0,0x6,0x6,0x0,
	};

	tippinghat.AddSprite(canvas2, 8, 16);
	tippinghat.AddSprite(canvas3, 8, 16);
	tippinghat.AddSprite(canvas4, 8, 16);
	tippinghat.AddSprite(canvas5, 8, 16);
	tippinghat.ReUseSprite(2);
	tippinghat.ReUseSprite(1);
	tippinghat.ReUseSprite(0);

	guy = new Entity;
	guy->AddComponent<PixelSprite>()->AddSprite(canvas, 8, 16);
	guy->AddComponent<Animation>();
	this->Addchild(guy);

	gal = new Entity;
	gal->AddComponent<PixelSprite>()->AddSprite(galcanvas, 8,16);
	gal->transform->position = new Vector3(8.0f, 0.0f, 0.0f);
	this->Addchild(gal);
	//starttime = glfwGetTime();
}

void Test::update(float deltaTime)
{
	guy->GetComponent<Animation>()->PlayAnimation(tippinghat);
}
